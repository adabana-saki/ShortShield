# カスタムドメインブロック機能 - 初心者向けガイド

## 📚 目次

1. [カスタムドメインとは？](#カスタムドメインとは)
2. [設定方法](#設定方法)
3. [パターンの書き方](#パターンの書き方)
4. [実例集](#実例集)
5. [よくある質問](#よくある質問)

---

## カスタムドメインとは？

カスタムドメイン機能を使うと、YouTube、TikTok、Instagramなどの標準対応サイト以外にも、**任意のウェブサイト全体**をブロックできます。

### 使用例
- 仕事中にニュースサイトをブロックしたい
- SNS全般をブロックしたい
- ゲームサイトへのアクセスを制限したい
- 特定のサブドメインだけをブロックしたい

---

## 設定方法

### ステップ1: 設定画面を開く

1. ブラウザのツールバーにあるShortShieldアイコンをクリック
2. 「設定」または「Options」を選択

### ステップ2: カスタムドメインセクションへ移動

1. 設定画面内の「カスタムドメイン」タブをクリック
2. 「新しいドメインを追加」ボタンをクリック

### ステップ3: ドメインを追加

1. **ドメインパターン**を入力（例: `twitter.com`）
2. **説明**を入力（任意・自分がわかりやすい名前）
3. 「追加」ボタンをクリック

### ステップ4: 確認

追加したドメインにアクセスすると、ブロック画面が表示されます。

---

## パターンの書き方

ShortShieldは複数のパターン形式をサポートしています。

### 1. **完全一致** (推奨)

```
twitter.com
```

**マッチするURL:**
- `https://twitter.com`
- `https://www.twitter.com`
- `https://mobile.twitter.com` (サブドメインも含む)

**マッチしないURL:**
- `https://mytwitter.com`

---

### 2. **ワイルドカード: 含む**

```
*youtube*
```

**マッチするURL:**
- `https://youtube.com`
- `https://m.youtube.com`
- `https://myyoutube.com`
- `https://youtube-dl.org`

**使用例:**
YouTubeに関連する全てのサイトをブロックしたい場合

---

### 3. **ワイルドカード: 前方一致**

```
reddit*
```

**マッチするURL:**
- `https://reddit.com`
- `https://reddit-stream.com`
- `https://reddit.example.com`

**マッチしないURL:**
- `https://myreddit.com`

---

### 4. **ワイルドカード: 後方一致**

```
*reddit
```

**マッチするURL:**
- `https://reddit`
- `https://myreddit`
- `https://old.reddit`

**マッチしないURL:**
- `https://reddit.com`

---

### 5. **サブドメイン指定**

```
*.youtube.com
```

**マッチするURL:**
- `https://m.youtube.com`
- `https://music.youtube.com`
- `https://studio.youtube.com`

**マッチしないURL:**
- `https://youtube.com` (メインドメインは除外)

---

## 実例集

### 例1: SNS全般をブロック

```
twitter.com
facebook.com
instagram.com
tiktok.com
```

### 例2: ニュースサイトをブロック

```
news.yahoo.co.jp
www3.nhk.or.jp
mainichi.jp
```

### 例3: エンタメ系サイトをブロック

```
*netflix*
*hulu*
*amazon*video*
```

### 例4: 特定のゲームサイトをブロック

```
*.mihoyo.com
*.hoyoverse.com
steam*
```

### 例5: Redditの全サブドメインをブロック

```
*.reddit.com
old.reddit.com
```

---

## よくある質問

### Q1: ブロックが効かないのですが？

**確認事項:**

1. **拡張機能が有効**になっていますか？
   - ツールバーのShortShieldアイコンをクリック
   - 「ShortShield有効」になっているか確認

2. **パターンが正しい**ですか？
   - ドメイン名のみを入力（`https://` や `/` は不要）
   - 例: ❌ `https://twitter.com/` → ⚪ `twitter.com`

3. **キャッシュをクリア**してみてください
   - ブラウザのキャッシュとCookieをクリア
   - ページを再読み込み

### Q2: `*youtube/*` のように書けますか？

はい、可能です！

- `*youtube*` - youtubeを含む全てのドメインにマッチ
- `*youtube/*` - 同上（スラッシュは無視されます）

推奨: **シンプルに `*youtube*` と書く**方が分かりやすいです。

### Q3: 一時的にブロックを解除できますか？

**方法1: 個別ドメインを無効化**
1. 設定画面 → カスタムドメイン
2. 該当ドメインの横にある「削除」ボタンをクリック

**方法2: 拡張機能全体を無効化**
1. ShortShieldアイコンをクリック
2. トグルスイッチをOFFにする

### Q4: いくつまでドメインを追加できますか？

現在の制限: **最大100個**のカスタムドメイン

### Q5: 正規表現は使えますか？

いいえ、現在は**ワイルドカード(`*`)のみ**サポートしています。

---

## トラブルシューティング

### 問題: 設定したのにブロックされない

**解決策:**

1. **ページを更新**してください
2. **ブラウザを再起動**してください
3. **拡張機能を再インストール**してください

### 問題: 特定のサブドメインだけをブロックしたい

例: `m.youtube.com` だけブロックして、`youtube.com` はブロックしない

**解決策:**

```
m.youtube.com
```

完全一致で登録すると、サブドメイン自体もブロックされますが、親ドメインはブロックされません。

ただし、**現在の仕様では親ドメインもブロックされてしまいます**。この機能は今後のアップデートで改善予定です。

### 問題: ワイルドカードが効かない

例: `*news*` を設定したのに `news.example.com` がブロックされない

**解決策:**

1. パターンを確認
   - ❌ `*news*` (これは正しいはずですが...)

2. デバッグ用にシンプルなパターンで試す
   - `news.example.com` と完全一致で登録してみる

3. それでも効かない場合は、issueを報告してください

---

## まとめ

### 基本の使い方

1. **シンプルなドメイン名を登録** → `twitter.com`
2. **ワイルドカードで広範囲をブロック** → `*youtube*`
3. **説明を付けて管理しやすく** → 「勉強中にブロック」

### おすすめパターン

- 完全一致: `twitter.com` - 最も確実
- 含む: `*youtube*` - 関連サイトも含む
- サブドメイン: `*.reddit.com` - 特定サブドメインのみ

---

## サポート

問題が解決しない場合は、GitHubで報告してください:

[https://github.com/anthropics/shortshield/issues](https://github.com/anthropics/shortshield/issues)

---

**ShortShieldで快適な集中環境を！** 🛡️✨
